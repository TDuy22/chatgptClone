[
  {
    "messageId": "msg_1a2b3c",
    "sender": "bot",
    "timestamp": "2025-11-04T12:30:00Z",
    "content": {
      "answer": "Mỗi đoạn trong câu trả lời có thể sẽ có hoặc không có metadata [1]. Metadata này chính là file PDF mà mô hình dùng để trả lời, và bạn cần trích dẫn (cite) cả trang của tài liệu đó [1]. Khi người dùng bấm vào trích dẫn, hệ thống sẽ hiển thị file và mở đúng trang đã được ghi [2].",
      "sources": [
        {
          "id": "1",
          "fileName": "project_specs.pdf",
          "pageNumber": 4,
          "fileUrl": "/api/documents/project_specs.pdf",
          "snippet": "Để đảm bảo tính chính xác, mỗi câu trả lời phải được liên kết với metadata... bao gồm tên file và số trang cụ thể."
        },
        {
          "id": "2",
          "fileName": "ux_design_requirements.docx",
          "pageNumber": 2,
          "fileUrl": "/api/documents/ux_design_requirements.docx",
          "snippet": "Tính năng 'Click-to-Source': Cho phép người dùng bấm vào trích dẫn [id] để mở file nguồn tại đúng trang [page]."
        }
      ]
    }
  },
  {
    "messageId": "msg_4d5e6f",
    "sender": "user",
    "timestamp": "2025-11-04T12:31:15Z",
    "content": {
      "text": "Cảm ơn! Vậy làm thế nào để tôi triển khai tính năng 'Click-to-Source' trên front-end?"
    }
  },
  {
    "messageId": "msg_7g8h9i",
    "sender": "bot",
    "timestamp": "2025-11-04T12:35:00Z",
    "content": {
      "answer": "Để triển khai front-end, bạn sẽ cần phân tích (parse) trường 'answer' để tìm các thẻ trích dẫn như [3]. Sau đó, bạn dùng thông tin từ mảng 'sources' để tạo các liên kết hoặc pop-up tương ứng [3].",
      "sources": [
        {
          "id": "3",
          "fileName": "frontend_dev_guide.pdf",
          "pageNumber": 8,
          "fileUrl": "/api/documents/frontend_dev_guide.pdf",
          "snippet": "Regex có thể được sử dụng để trích xuất các ID trích dẫn (ví dụ: /[(d+)]/g) từ chuỗi văn bản trả về."
        }
      ]
    }
  },
  {
    "messageId": "msg_0j1k2l",
    "sender": "bot",
    "timestamp": "2025-11-04T12:40:00Z",
    "content": {
      "answer": "Ngoài ra, hãy đảm bảo xử lý trường hợp trích dẫn không tìm thấy nguồn (source) tương ứng một cách mượt mà, ví dụ như hiển thị một thông báo lỗi [4].",
      "sources": [
        {
          "id": "4",
          "fileName": "error_handling.txt",
          "pageNumber": 1,
          "fileUrl": "/api/documents/error_handling.txt",
          "snippet": "Nếu một ID trích dẫn trong 'answer' không có mục 'source' tương ứng, hãy vô hiệu hóa liên kết đó."
        }
      ]
    }
  }
]